(()=>{Set.prototype.union||(Object.defineProperty(Set.prototype,"union",{value(e){let t=new Set([...this]);if(e.size!==void 0&&e.has!==void 0&&e.keys!==void 0)for(let r of e.keys())t.add(r);return t}}),Object.defineProperty(Set.prototype,"difference",{value(e){let t=new Set;for(let r of this)e.has(r)||t.add(r);return t}}),Object.defineProperty(Set.prototype,"symmetricDifference",{value(e){let t=this.difference(e);for(let r of e)this.has(r)||t.add(r);return t}}),Object.defineProperty(Set.prototype,"intersection",{value(e){let t=new Set;for(let r of this)e.has(r)&&t.add(r);return t}}),Object.defineProperty(Set.prototype,"isSubsetOf",{value(e){for(let t of this)if(!e.has(t))return!1;return!0}}),Object.defineProperty(Set.prototype,"isSupersetOf",{value(e){for(let t of e)if(!this.has(t))return!1;return!0}}),Object.defineProperty(Set.prototype,"isDisjointFrom",{value(e){for(let t of this)if(e.has(t))return!1;return!0}}));Set.prototype.equals||Object.defineProperty(Set.prototype,"equals",{value(e){return this.size===e.size&&this.isSubsetOf(e)}});Object.defineProperty(Array.prototype,"flat",{value(e=1,t=[]){for(let r of this)Array.isArray(r)&&e>0?r.flat(e-1,t):t.push(r);return t},writable:!0});Object.defineProperty(Array.prototype,"flatMap",{value(e){return this.map(e).flat()},writable:!0});Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value(e){let t=+e;return t<0&&(t+=this.length),this[t]}});Array.prototype.findLast||(Object.defineProperty(Array.prototype,"findLast",{value(e){let t=this.length;for(;t>0;){let r=this[--t];if(e(r,t))return r}}}),Object.defineProperty(Array.prototype,"findLastIndex",{value(e){let t=this.length;for(;t>0;){let r=this[--t];if(e(r,t))return t}return-1}}));Array.prototype.toSorted||(Object.defineProperty(Array.prototype,"toSorted",{value(e){return[...this].sort(e)}}),Object.defineProperty(Array.prototype,"toReversed",{value(){return[...this].reverse()}}),Object.defineProperty(Array.prototype,"toSpliced",{value(...e){return[...this].splice(...e)}}),Object.defineProperty(Array.prototype,"with",{value(e,t){let r=+e,i=[...this];return r<0&&(r+=i.length),i[r]=t,i}}));Array.prototype.group||(Object.defineProperty(Array.prototype,"group",{value(e){let t={};if(typeof e=="function"){for(let r of this){let i=e(r);t[i]?t[i].push(r):t[i]=[r]}return t}else throw Error("argument callback must be a function.")}}),Object.defineProperty(Array.prototype,"groupToMap",{value(e){let t=new Map;if(typeof e=="function"){for(let r of this){let i=e(r);t.has(i)?t.get(i).push(r):t.set(i,[r])}return t}else throw Error("argument callback must be a function.")}}));Object.empty||Object.defineProperty(Object,"empty",{value(e){try{for(let t in e)return!1}catch(t){}return!0}});Object.groupBy||Object.defineProperty(Object,"groupBy",{value(e,t){return e.group(t)}});Object.hasOwn||Object.defineProperty(Object,"hasOwn",{value(e,t){return e===null?!1:e.hasOwnProperty(t)}});Object.prototype.toParams||Object.defineProperty(Object.prototype,"toParams",{value(){let e="";for(let t in this)this[t]!==void 0&&(e+=`&${t}=${this[t]}`);return e.slice(1)}});Map.groupBy||Object.defineProperty(Map,"groupBy",{value(e,t){return e.groupToMap(t)}});function p(e,t){if(e+="",t+="",e===t)return 0;{e=e.split("."),t=t.split(".");let r=Math.max(e.length,t.length);for(let i=0;i<r;i++){let o=+e[i]||0,n=+t[i]||0;if(o>n)return 1;if(o<n)return-1}return 0}}String.prototype.splice||Object.defineProperty(String.prototype,"splice",{value(e,t,r){let i=this.length,o=arguments.length;if(r=r===void 0?"":r,o<1)return this;if(e<0&&(Math.abs(e)>=i?e=0:e=i+e),o===1)return this.slice(0,e);{t-=0;let n=this.slice(0,e),u=this.slice(e+t);return n+r+u}}});String.prototype.htmlspecialchars||Object.defineProperty(String.prototype,"htmlspecialchars",{value(e){let t=this.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return e==="ENT_QUOTES"?t.replace(/"/g,"&quot;").replace(/'/g,"&#39;"):e==="ENT_NOQUOTES"?t:t.replace(/"/g,"&quot;")}});String.prototype.tohtml||Object.defineProperty(String.prototype,"tohtml",{value(){return this.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/gi,"&")}});String.prototype.xss||Object.defineProperty(String.prototype,"xss",{value(){let e=this.htmlspecialchars("ENT_QUOTES");return e=e.replace(/(document\.cookie)|(document\.write)|(\.parentNode)|(window\.location)|(\.innerHTML)/g,"").replace(/(%0[0-8bcef])|(%1[0-9a-f])/g,""),e}});String.prototype.escape||Object.defineProperty(String.prototype,"escape",{value(){return this.replace(/('|"|&|\\|\}|\{|\(|\)|;|=|\,|&)/g,"\\$1")}});String.prototype.at||Object.defineProperty(String.prototype,"at",{value(e){let t=+e;return t<0&&(t+=this.length),this[t]}});String.prototype.toJson||Object.defineProperty(String.prototype,"toJson",{value(){let e=this.replace(/^\?/,""),t=decodeURIComponent(e).split("&").filter(i=>i).map(i=>i.split("=")),r={};for(let i of t)r[i[0]]=i[1]||"";return r}});String.prototype.lt||(Object.defineProperty(String.prototype,"lt",{value(e){return p(this,e)===-1}}),Object.defineProperty(String.prototype,"lte",{value(e){return p(this,e)<1}}),Object.defineProperty(String.prototype,"gt",{value(e){return p(this,e)===1}}),Object.defineProperty(String.prototype,"gte",{value(e){return p(this,e)>-1}}),Object.defineProperty(String.prototype,"eq",{value(e){return p(this,e)===0}}));var s=Number.prototype.toFixed;Object.defineProperty(Number.prototype,"toFixed",{value(e){return s.call(this+Number.EPSILON,e)},writable:!0});Number.parse||Object.defineProperty(Number,"parse",{value(e){return typeof e=="number"||typeof e=="string"?(e+="",e.startsWith("0")&&!e.startsWith("0.")?e==="0"?0:e:(isFinite(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER&&(e=+e),e)):e}});Number.fromString||Object.defineProperty(Number,"fromString",{value(e){return+e||0}});Date.isDate||Object.defineProperty(Date,"isDate",{value(e){return!!(e&&typeof e=="object"&&e.getTime)}});Date.prototype.getFullWeek||(Object.defineProperty(Date.prototype,"getFullWeek",{value(){let e=this.getFullYear(),t=new Date(e,0,1),r=t.getDay(),i=(this-t)/24/360/1e3;return Math.ceil((i+r)/7)}}),Object.defineProperty(Date.prototype,"getWeek",{value(){let e=this.getDate(),t=this.getMonth(),r=this.getFullYear(),i=new Date(r,t,1).getDay();return Math.ceil((e+i)/7)}}));Date.prototype.format||Object.defineProperty(Date.prototype,"format",{value(e){let t={fullyear:this.getFullYear(),year:this.getYear(),fullweek:this.getFullWeek(),week:this.getWeek(),month:this.getMonth()+1,date:this.getDate(),day:this.getDay(),hours:this.getHours(),minutes:this.getMinutes(),seconds:this.getSeconds()},r=null;e=e||"Y-m-d H:i:s",t.g=t.hours>12?t.hours-12:t.hours,r={Y:t.fullyear,y:t.year,m:t.month<10?"0"+t.month:t.month,n:t.month,d:t.date<10?"0"+t.date:t.date,j:t.date,H:t.hours<10?"0"+t.hours:t.hours,h:t.g<10?"0"+t.g:t.g,G:t.hours,g:t.g,i:t.minutes<10?"0"+t.minutes:t.minutes,s:t.seconds<10?"0"+t.seconds:t.seconds,W:t.fullweek,w:t.week,D:t.day};for(let i in r)e=e.replace(new RegExp(i,"g"),r[i]);return e}});Promise.defer||(Promise.defer=function(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e});Promise.withResolvers||(Promise.withResolvers=Promise.defer);})();
